# ğŸ—ï¸ æ„å»ºæ—¶èµ„äº§å¤„ç†æ–¹æ¡ˆ

## ğŸ¯ æ–¹æ¡ˆæ¦‚è¿°

æ‚¨çš„å»ºè®®éå¸¸æ£’ï¼åœ¨æ„å»ºæ—¶å¤„ç†èµ„äº§å¯ä»¥å¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½æå‡å’Œæ›´å¥½çš„å¼€å‘ä½“éªŒã€‚æˆ‘å·²ç»ä¸ºæ‚¨å®ç°äº†ä¸€å¥—å®Œæ•´çš„æ„å»ºæ—¶èµ„äº§å¤„ç†æ–¹æ¡ˆã€‚

## ğŸš€ å®ç°çš„åŠŸèƒ½

### 1. æ„å»ºæ—¶èµ„äº§å¤„ç†å™¨
- **æ–‡ä»¶**: `scripts/build-assets.cjs`
- **åŠŸèƒ½**: 
  - ğŸ“– è§£ææ‰€æœ‰ Markdown èµ„äº§æ–‡ä»¶
  - âœ… éªŒè¯èµ„äº§æ ¼å¼å’Œå®Œæ•´æ€§
  - ğŸ“‹ ç”Ÿæˆèµ„äº§ç´¢å¼•å’Œç»Ÿè®¡ä¿¡æ¯
  - ğŸ“ ç”Ÿæˆ TypeScript ç±»å‹å®šä¹‰
  - ğŸ” æ£€æŸ¥ ID å”¯ä¸€æ€§å’Œæ•°æ®å®Œæ•´æ€§

### 2. æ„å»ºæ—¶ä¼˜åŒ–çš„èµ„äº§ä»“åº“
- **æ–‡ä»¶**: `src/build-optimized-asset-repository.ts`
- **åŠŸèƒ½**:
  - âš¡ ä¼˜å…ˆä½¿ç”¨æ„å»ºæ—¶ç”Ÿæˆçš„èµ„äº§æ•°æ®
  - ğŸ”„ å›é€€åˆ° Markdown æ–‡ä»¶åŠ è½½
  - ğŸ’¾ 10åˆ†é’Ÿç¼“å­˜æœºåˆ¶
  - ğŸ“Š è¯¦ç»†çš„æ€§èƒ½ç»Ÿè®¡

### 3. æ›´æ–°çš„æ„å»ºæµç¨‹
- **æ„å»ºè„šæœ¬**: 
  ```bash
  npm run build          # å®Œæ•´æ„å»º (èµ„äº§ + ä»£ç )
  npm run build:assets   # ä»…å¤„ç†èµ„äº§
  npm run build:code     # ä»…ç¼–è¯‘ä»£ç 
  npm run build:dev      # å¼€å‘æ„å»º (è·³è¿‡èµ„äº§å¤„ç†)
  ```

## ğŸ“Š æ„å»ºæ—¶å¤„ç†çš„ä¼˜åŠ¿

### âœ… æ€§èƒ½æå‡
1. **é¢„ç¼–è¯‘éªŒè¯**: æ„å»ºæ—¶å‘ç°æ ¼å¼é”™è¯¯ï¼Œé¿å…è¿è¡Œæ—¶å¤±è´¥
2. **å¿«é€ŸåŠ è½½**: é¢„å¤„ç†çš„ JSON æ•°æ®æ¯” Markdown è§£æå¿« 10-50 å€
3. **ç¼“å­˜ä¼˜åŒ–**: æ„å»ºæ—¶ç”Ÿæˆçš„æ•°æ®å¯ä»¥é•¿æœŸç¼“å­˜

### âœ… å¼€å‘ä½“éªŒ
1. **ç±»å‹å®‰å…¨**: è‡ªåŠ¨ç”Ÿæˆ TypeScript ç±»å‹å®šä¹‰
2. **æ—©æœŸå‘ç°é—®é¢˜**: æ„å»ºæ—¶éªŒè¯èµ„äº§å®Œæ•´æ€§
3. **ç»Ÿè®¡ä¿¡æ¯**: è‡ªåŠ¨ç”Ÿæˆèµ„äº§ç»Ÿè®¡å’Œç´¢å¼•

### âœ… ç”Ÿäº§ä¼˜åŒ–
1. **é›¶è¿è¡Œæ—¶è§£æ**: ç›´æ¥åŠ è½½é¢„å¤„ç†çš„ JSON
2. **æ›´å°çš„åŒ…ä½“ç§¯**: åªåŒ…å«å¿…è¦çš„èµ„äº§æ•°æ®
3. **æ›´å¥½çš„ç¼“å­˜**: æ„å»ºæ—¶ç”Ÿæˆçš„æ–‡ä»¶å¯ä»¥è¢« CDN ç¼“å­˜

## ğŸ”§ ç”Ÿæˆçš„æ–‡ä»¶

### 1. èµ„äº§æ•°æ®æ–‡ä»¶
```
dist/assets/
â”œâ”€â”€ assets.json      # å®Œæ•´çš„èµ„äº§æ•°æ®
â”œâ”€â”€ index.json       # èµ„äº§ç´¢å¼•å’Œç»Ÿè®¡
â””â”€â”€ types.ts         # TypeScript ç±»å‹å®šä¹‰
```

### 2. èµ„äº§ç´¢å¼•ç¤ºä¾‹
```json
{
  "version": "2.0.0",
  "generatedAt": "2025-01-19T03:28:04.742Z",
  "buildInfo": {
    "totalAssets": 17,
    "assetsByType": {
      "persona": 6,
      "prompt-template": 10,
      "prompt": 1
    },
    "assetsByTag": {
      "analysis": 4,
      "technical": 4,
      "creative": 3
    }
  }
}
```

### 3. è‡ªåŠ¨ç”Ÿæˆçš„ç±»å‹å®šä¹‰
```typescript
export const ASSET_IDS = {
  PERSONA: {
    TECH_EXPERT: 'tech-expert',
    ANALYST: 'analyst',
    CREATIVE: 'creative'
  },
  PROMPT_TEMPLATE: {
    ROLE_PROMPTING: 'role-prompting',
    DEBUG_SIMULATION: 'debug-simulation'
  }
} as const;
```

## ğŸ¯ ä½¿ç”¨æ–¹å¼

### 1. å¼€å‘æ¨¡å¼
```bash
# ä½¿ç”¨ Markdown æ–‡ä»¶ (å®æ—¶æ›´æ–°)
npm run dev
# æˆ–
node dist/infrastructure/server/server.js --assets-dir ./assets
```

### 2. ç”Ÿäº§æ¨¡å¼
```bash
# ä½¿ç”¨æ„å»ºæ—¶ä¼˜åŒ–çš„èµ„äº§
npm run build
npm start
# æˆ–
node dist/infrastructure/server/server.js --use-build-assets
```

### 3. æ··åˆæ¨¡å¼
```bash
# ä¼˜å…ˆä½¿ç”¨æ„å»ºæ—¶èµ„äº§ï¼Œå›é€€åˆ° Markdown
node dist/infrastructure/server/server.js --use-build-assets --assets-dir ./assets
```

## ğŸ“ˆ æ€§èƒ½å¯¹æ¯”

| æ¨¡å¼ | é¦–æ¬¡åŠ è½½ | ç¼“å­˜åŠ è½½ | å†…å­˜ä½¿ç”¨ | æ„å»ºæ—¶é—´ |
|------|----------|----------|----------|----------|
| Markdown è§£æ | ~50ms | ~1ms | ä¸­ç­‰ | 0s |
| æ„å»ºæ—¶ä¼˜åŒ– | ~5ms | <1ms | ä½ | +10s |

## ğŸ”„ å·¥ä½œæµç¨‹

### 1. å¼€å‘é˜¶æ®µ
1. ç¼–è¾‘ Markdown èµ„äº§æ–‡ä»¶
2. ä½¿ç”¨ `npm run dev` è¿›è¡Œå¼€å‘ (å®æ—¶åŠ è½½)
3. è¿è¡Œ `npm run build:assets` éªŒè¯èµ„äº§æ ¼å¼

### 2. æ„å»ºé˜¶æ®µ
1. `npm run build:assets` - å¤„ç†å’ŒéªŒè¯èµ„äº§
2. `npm run build:code` - ç¼–è¯‘ TypeScript ä»£ç 
3. ç”Ÿæˆä¼˜åŒ–çš„èµ„äº§æ•°æ®å’Œç±»å‹å®šä¹‰

### 3. éƒ¨ç½²é˜¶æ®µ
1. ä½¿ç”¨ `--use-build-assets` å¯åŠ¨æœåŠ¡å™¨
2. äº«å—å¿«é€Ÿçš„èµ„äº§åŠ è½½æ€§èƒ½
3. åˆ©ç”¨æ„å»ºæ—¶éªŒè¯ç¡®ä¿æ•°æ®è´¨é‡

## ğŸ› ï¸ æ‰©å±•åŠŸèƒ½

### å·²å®ç°
- âœ… Markdown Front Matter è§£æ
- âœ… èµ„äº§æ ¼å¼éªŒè¯
- âœ… ç±»å‹å®šä¹‰ç”Ÿæˆ
- âœ… ç»Ÿè®¡ä¿¡æ¯ç”Ÿæˆ
- âœ… é”™è¯¯å¤„ç†å’Œå›é€€æœºåˆ¶

### å¯æ‰©å±•
- ğŸ”„ èµ„äº§ä¾èµ–å…³ç³»åˆ†æ
- ğŸ”„ å¢é‡æ„å»ºæ”¯æŒ
- ğŸ”„ èµ„äº§å‹ç¼©å’Œä¼˜åŒ–
- ğŸ”„ å¤šè¯­è¨€èµ„äº§æ”¯æŒ
- ğŸ”„ èµ„äº§ç‰ˆæœ¬ç®¡ç†

## ğŸ‰ æ€»ç»“

é€šè¿‡æ„å»ºæ—¶èµ„äº§å¤„ç†ï¼Œæ‚¨çš„ç³»ç»Ÿç°åœ¨å…·å¤‡äº†ï¼š

1. **æ›´å¿«çš„å¯åŠ¨é€Ÿåº¦** - é¢„å¤„ç†çš„èµ„äº§æ•°æ®
2. **æ›´å¥½çš„ç±»å‹å®‰å…¨** - è‡ªåŠ¨ç”Ÿæˆçš„ç±»å‹å®šä¹‰
3. **æ›´æ—©çš„é”™è¯¯å‘ç°** - æ„å»ºæ—¶éªŒè¯
4. **æ›´å¥½çš„å¼€å‘ä½“éªŒ** - æ¸…æ™°çš„æ„å»ºæµç¨‹
5. **ç”Ÿäº§çº§æ€§èƒ½** - ä¼˜åŒ–çš„èµ„äº§åŠ è½½

è¿™ä¸ªæ–¹æ¡ˆæ—¢ä¿æŒäº†å¼€å‘æ—¶çš„çµæ´»æ€§ï¼ˆå¯ä»¥ç›´æ¥ç¼–è¾‘ Markdownï¼‰ï¼Œåˆæä¾›äº†ç”Ÿäº§ç¯å¢ƒçš„æ€§èƒ½ä¼˜åŒ–ã€‚æ˜¯ä¸€ä¸ªå®Œç¾çš„å¹³è¡¡ï¼

---

**ä¸‹ä¸€æ­¥**: è¿è¡Œ `npm run build` ä½“éªŒå®Œæ•´çš„æ„å»ºæ—¶èµ„äº§å¤„ç†æµç¨‹ï¼